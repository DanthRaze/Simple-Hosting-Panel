<!DOCTYPE html>
<html>
<head>
    <title>Simple Hosting Panel</title>
    <link rel="stylesheet" href="node_modules/xterm/css/xterm.css" />
    <link rel="stylesheet" href="styles.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>

    <div id="setup-modal">
        <div class="modal-content large-modal">
            <h2><i class="fas fa-server"></i> Server Setup</h2>
            
            <div class="setup-tabs">
                <button class="tab-btn active" onclick="switchSetupTab('create')">Create New Server</button>
                <button class="tab-btn" onclick="switchSetupTab('import')">Import Existing</button>
            </div>

            <div id="tab-create" class="setup-tab-content active">
                <div class="form-group">
                    <label>1. Installation Folder</label>
                    <div style="display:flex; gap:10px;">
                        <button class="btn-secondary" id="btn-create-folder" style="flex:1">Select Empty Folder</button>
                    </div>
                    <p id="create-path-display" class="path-text">No folder selected</p>
                </div>

                <div class="form-group">
                    <label>2. Server Software</label>
                    <div class="software-grid">
                        <div class="soft-card" onclick="selectSoftware('paper')" id="soft-paper">Paper</div>
                        <div class="soft-card" onclick="selectSoftware('purpur')" id="soft-purpur">Purpur</div>
                        <div class="soft-card" onclick="selectSoftware('vanilla')" id="soft-vanilla">Vanilla</div>
                    </div>
                </div>

                <div class="form-group">
                    <label>3. Version</label>
                    <select id="version-select" disabled><option>Select Software First</option></select>
                </div>

                <div class="form-group">
                    <label>4. Initial Settings</label>
                    <div class="cols">
                        <div>
                            <label>RAM (GB)</label>
                            <input type="number" id="create-ram" value="4" min="1" max="32">
                        </div>
                        <div>
                            <label>Port</label>
                            <input type="number" id="create-port" value="25565">
                        </div>
                    </div>
                </div>

                <button class="btn-action start" id="btn-install-server" style="width:100%; justify-content:center; margin-top:10px;" disabled>
                    <i class="fas fa-download"></i> Download & Install
                </button>
                <p id="install-status" style="margin-top:10px; font-size:12px; color:#aaa;"></p>
            </div>

            <div id="tab-import" class="setup-tab-content">
                <button class="btn-main" id="btn-select-folder">Select Server Folder</button>
                <p id="selected-path" class="path-text">No folder selected</p>
                
                <label>Select JAR File</label>
                <select id="jar-select"><option>Select Folder First</option></select>
                
                <br><br>
                <label>RAM Allocation (GB)</label>
                <input type="range" id="setup-ram" min="1" max="16" value="4" oninput="this.nextElementSibling.value = this.value + ' GB'">
                <output>4 GB</output>
                
                <br><br>
                <div class="cols">
                    <div>
                        <label>RCON Port</label>
                        <input type="number" id="setup-rcon-port" value="25575">
                    </div>
                    <div>
                        <label>RCON Password</label>
                        <input type="password" id="setup-rcon-pw" placeholder="Secret123">
                    </div>
                </div>

                <button class="btn-action" id="btn-finish-setup" style="width: 100%; justify-content: center; margin-top: 25px;">Import Server</button>
            </div>
        </div>
    </div>

    <div class="sidebar">
        <div class="logo"><i class="fas fa-cube"></i> Hosting Panel</div>
        <div class="nav-item active" onclick="showPage('performance')"><i class="fas fa-chart-line"></i> Performance</div>
        <div class="nav-item" onclick="showPage('console')"><i class="fas fa-terminal"></i> Console</div>
        <div class="nav-item" onclick="showPage('players')"><i class="fas fa-users"></i> Players</div>
        <div class="nav-item" onclick="showPage('files')"><i class="fas fa-folder"></i> File Manager</div>
        <div class="nav-item" onclick="showPage('backups')"><i class="fas fa-archive"></i> Backups</div>
        <div class="nav-item" onclick="showPage('settings')"><i class="fas fa-cog"></i> Settings</div>
        
        <div style="flex:1"></div>
        <div class="copyright">
            &copy; Theo Tech 2026
        </div>
    </div>

    <div class="main-content">
        <div class="top-bar">
            <div id="server-name">Server Dashboard</div>
            <div class="controls">
                <span class="status-badge" id="status-badge">OFFLINE</span>
                <button class="btn-action start" id="start-btn"><i class="fas fa-play"></i> Start</button>
                <button class="btn-action restart" id="restart-btn"><i class="fas fa-redo"></i> Restart</button>
                <button class="btn-action stop" id="stop-btn"><i class="fas fa-stop"></i> Stop</button>
                <button class="btn-action kill" id="kill-btn"><i class="fas fa-skull"></i> Kill</button>
            </div>
        </div>

        <div id="page-performance" class="page active">
            <div class="stats-grid">
                <div class="card">
                    <div class="stat-value" id="cpu-val">0%</div>
                    <div class="stat-label">CPU Load</div>
                </div>
                <div class="card">
                    <div class="stat-value" id="ram-val">0 MB</div>
                    <div class="stat-label">RAM Usage</div>
                </div>
            </div>
            <div class="card chart-card">
                <canvas id="perfChart"></canvas>
            </div>
        </div>

        <div id="page-console" class="page">
            <div id="terminal-container"></div>
        </div>

        <div id="page-players" class="page">
            <h3>Player Management</h3>
            <div class="card" style="padding:0; overflow:hidden;">
                <table class="player-table">
                    <thead>
                        <tr>
                            <th>Status</th>
                            <th>Name</th>
                            <th>UUID</th>
                            <th>Whitelist</th>
                            <th>OP</th>
                            <th>Ban</th>
                        </tr>
                    </thead>
                    <tbody id="player-list-body"></tbody>
                </table>
            </div>
        </div>

        <div id="page-files" class="page">
            <div id="file-browser">
                <div class="breadcrumb">
                    <button id="btn-root">Home</button> <span id="current-path-display">/</span>
                    <button id="btn-back" disabled>⬆ Up</button>
                </div>
                <div class="file-list" id="file-list-container"></div>
            </div>
            <div id="file-editor" style="display:none;">
                <div class="editor-toolbar">
                    <button class="btn-secondary" onclick="closeEditor()">Close</button>
                    <span id="editing-filename">filename.txt</span>
                    <button class="btn-action" id="btn-save-file">Save Changes</button>
                </div>
                <textarea id="editor-textarea"></textarea>
            </div>
        </div>

        <div id="page-backups" class="page">
            <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:20px;">
                <h3>Server Backups</h3>
                <button class="btn-action" onclick="createNewBackup()"><i class="fas fa-plus"></i> Create Backup</button>
            </div>
            <div class="backup-list" id="backup-list">
                </div>
        </div>

        <div id="page-settings" class="page">
            <h3>Server Configuration</h3>
            <div class="settings-grid">
                
                <div class="card">
                    <h4>General</h4>
                    <label>RAM Allocation (Restart Required)</label>
                    <div class="slider-container">
                        <input type="range" id="set-ram" min="1" max="16" step="1">
                        <span id="ram-disp">4 GB</span>
                    </div>

                    <label>Max Players</label>
                    <input type="number" id="prop-max-players" class="input-dark">

                    <label>View Distance</label>
                    <input type="number" id="prop-view-distance" class="input-dark">
                </div>

                <div class="card">
                    <h4>Gameplay & RCON</h4>
                    <label>RCON Port (Manager Connection)</label>
                    <input type="number" id="set-rcon-port" class="input-dark">
                    
                    <label>RCON Password (Manager Connection)</label>
                    <input type="password" id="set-rcon-pw" class="input-dark">

                    <label>Gamemode</label>
                    <select id="prop-gamemode" class="input-dark">
                        <option value="survival">Survival</option>
                        <option value="creative">Creative</option>
                        <option value="adventure">Adventure</option>
                    </select>

                    <label>Difficulty</label>
                    <select id="prop-difficulty" class="input-dark">
                        <option value="peaceful">Peaceful</option>
                        <option value="easy">Easy</option>
                        <option value="normal">Normal</option>
                        <option value="hard">Hard</option>
                    </select>

                    <div class="toggle-row">
                        <span>Enable Whitelist</span>
                        <input type="checkbox" id="prop-white-list">
                    </div>
                </div>

                <div class="card full-width">
                    <h4>MOTD & Appearance</h4>
                    <p class="subtext">Use '§' for colors (e.g. §a for green)</p>
                    <input type="text" id="prop-motd" class="input-dark" placeholder="A Minecraft Server">
                    <div class="motd-preview" id="motd-preview">
                        <img src="https://assets.stickpng.com/images/580b57fcd9996e24bc43c2f0.png" width="32">
                        <div>
                            <div class="motd-title">Minecraft Server</div>
                            <div class="motd-text" id="motd-render"></div>
                        </div>
                    </div>
                </div>

            </div>
            <br>
            <button class="btn-action save-big" id="btn-save-settings">Save Settings & Properties</button>
            <div class="danger-zone" style="margin-top: 50px; border-top: 1px solid #da3633; padding-top: 20px;">
                <h4>Danger Zone</h4>
                <p class="subtext">Forget all app settings and return to setup.</p>
                <button class="btn-action kill" id="btn-reset-data">Reset App Data</button>
            </div>
        </div>
    </div>

    <script src="node_modules/chart.js/dist/chart.umd.js"></script>
    <script src="node_modules/xterm/lib/xterm.js"></script>
    <script src="node_modules/xterm-addon-fit/lib/xterm-addon-fit.js"></script>
    <script src="renderer.js"></script>
</body>
</html>